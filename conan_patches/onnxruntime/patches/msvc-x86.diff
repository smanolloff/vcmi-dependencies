--- a/cmake/adjust_global_compile_flags.cmake
+++ b/cmake/adjust_global_compile_flags.cmake
@@ -226,19 +226,23 @@ endmacro()
 
 #Set global compile flags for all the source code(including third_party code like protobuf)
 #This section must be before any add_subdirectory, otherwise build may fail because /MD,/MT mismatch
+message(STATUS "SIMO STATUS: MSVC=${MSVC} | CMAKE_VS_PLATFORM_NAME=${CMAKE_VS_PLATFORM_NAME} | CMAKE_C_COMPILER_ARCHITECTURE_ID=${CMAKE_C_COMPILER_ARCHITECTURE_ID} | CMAKE_SYSTEM_PROCESSOR=${CMAKE_SYSTEM_PROCESSOR}")
 if (MSVC)
   if (CMAKE_VS_PLATFORM_NAME)
     # Multi-platform generator
     set(onnxruntime_target_platform ${CMAKE_VS_PLATFORM_NAME})
+  elseif (CMAKE_C_COMPILER_ARCHITECTURE_ID)
+    string(TOLOWER "${CMAKE_C_COMPILER_ARCHITECTURE_ID}" onnxruntime_target_platform)
   else()
     set(onnxruntime_target_platform ${CMAKE_SYSTEM_PROCESSOR})
   endif()
+  message(STATUS "SIMO: onnxruntime_target_platform=${onnxruntime_target_platform}")
   if (onnxruntime_target_platform STREQUAL "ARM64")
     set(onnxruntime_target_platform "ARM64")
     enable_language(ASM_MARMASM)
   elseif (onnxruntime_target_platform STREQUAL "ARM64EC")
     enable_language(ASM_MARMASM)
-  elseif (onnxruntime_target_platform STREQUAL "ARM" OR CMAKE_GENERATOR MATCHES "ARM")
+  elseif (onnxruntime_target_platform STREQUAL "ARM" OR onnxruntime_target_platform STREQUAL "ARM64" OR CMAKE_GENERATOR MATCHES "ARM")
     set(onnxruntime_target_platform "ARM")
     enable_language(ASM_MARMASM)
   elseif (onnxruntime_target_platform STREQUAL "x64" OR onnxruntime_target_platform STREQUAL "x86_64" OR onnxruntime_target_platform STREQUAL "AMD64" OR CMAKE_GENERATOR MATCHES "Win64")
@@ -250,9 +254,10 @@ if (MSVC)
     message("Enabling SAFESEH for x86 build")
     set(CMAKE_ASM_MASM_FLAGS "${CMAKE_ASM_MASM_FLAGS} /safeseh")
   else()
-    message(FATAL_ERROR "Unknown CMAKE_SYSTEM_PROCESSOR: ${CMAKE_SYSTEM_PROCESSOR}")
+    message(FATAL_ERROR "Unknown onnxruntime_target_platform: ${onnxruntime_target_platform}")
   endif()
 
+  message(STATUS "SIMO: (2) onnxruntime_target_platform=${onnxruntime_target_platform}")
 
   #Always enable exception handling, even for Windows ARM
   if (NOT onnxruntime_DISABLE_EXCEPTIONS)
